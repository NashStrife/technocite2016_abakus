<linkhomepro></linkhomepro>

<navbarpro></navbarpro>
<div class="container">


	<h1 style="background-color:#d6eaf8;">Création d'un nouveau devis</h1>
	<form action="" class="addInvoice" name="formAddEstimate" ng-submit="addBill(formAddEstimate.$valid)">
		<fieldset class="ref_invoice">
			<legend>Références devis</legend>
			<label for="numInvoice">Numéro de devis</label>
			<input type="text" ng-model="newEstimate.numInvoice" required>
			<label for="dateFacture">Date de la facture</label>
			<input type="date" ng-model="newEstimate.dateInvoice" required>
		</fieldset>
		<fieldset class="ref_client">
			<legend>Références client</legend>
			<div class="half estimate" id="halfEstimate">
				<label for="client">Client</label><br/>
				<select name="client" id="client" ng-model="newEstimate.client" ng-options="client as client.name for client in listClients" required></select>
			</div>
			<div class="cent">
				<label for="client">PO</label><br/>
				<input name="Client" id="client" class="cent" ng-model="newEstimate.po" ng-value="newEstimate.client._id" disabled required><br/>
				</select>
			</div>
			

			<button type="next" class="next">Suivant</button>

		</fieldset>
		<fieldset>
			<legend>Objet</legend>
			<label for="project-name">Nom du projet</label><br/>
			<input name="Nom du projet" id="project-name" placeholder="" class="cent"><br/>
			<div class="half">
				<label for="starting-date ">Date de début</label><br/>
				<input type="date" name="Date de début" id="starting-date " placeholder=""><br/>
			</div>
			<div class="half last">
				<label for="ending-date">Date de fin</label><br/>
				<input type="date" name="Date de fin" id="ending-date" placeholder=""><br/>
			</div>
			<button type="" class="next">Suivant</button>
		</fieldset>
		<fieldset>
			<legend>Détail</legend>
			<div id="facture_list">
				<!-- list the articles added in the temp array -->
				<div class="listing_achat">
					<ul class="elements-types">
						<li ng-repeat="item in articles track by $index">
							<input type="" name="name" class="full" value="{{item.name}}" disabled>
							<input type="" name="description" class="full" value="{{item.description}}" disabled>
							<input type="" name="quantity" class="quart" id="quart1" value="{{item.quantity}}" disabled>
							<input type="" name="unitPrice" class="quart" id="quart2" value="{{item.unitPrice}}" disabled>
							<input type="" name="amount" class="full" value="{{item.amount}}" id="amount" disabled>
							<!--
						--><span id="less" ng-click="removeElement('article', $index)"> - </span>
						</li>
					</ul>
				</div>
				<div class="facture" id="facture">
					<div class="article">
						<label for="article">Article</label>
						<select name="Article" id="article" ng-model="newEstimate.article" ng-options="article as article.name for article in adminfromdb.articles"></select>
					</div>
					<div class="description">
						<label for="description">Description</label>
						<input name="Description" id="description" placeholder="" ng-model="newEstimate.description" ng-value="newEstimate.article.description" disabled>
					</div>
					<div class="small">
						<label for="quantity">Qté</label>
						<input type="number" name="Quantité" id="quantity" ng-model="newEstimate.article.quantity" ng-change="calcAmount()" ng-value="newEstimate.article.quantity">
					</div>
					<div class="small">
						<label for="p-u">P/U</label>
						<input name="P/U" id="p-u" placeholder="" ng-model="newEstimate.article.unitPrice" ng-value="newEstimate.article.unitPrice" disabled>
					</div>
					<div class="bill">
						<label for="amount">Montant</label>
						<input name="Montant" id="amount" ng-model="newEstimate.article.amount" ng-value="newEstimate.article.amount" disabled>
					</div>
				</div>
			</div>
			<button type="button" class="more_line" ng-click="addElement('article')">+ Ajouter</button>
			<div class="total">

				<div class="htva">
					<label for="total xvat">Total hors taxes</label>
					<input name="Total hors Taxes" id="total xvat" placeholder="" ng-model="newEstimate.totalXvat" ng-value="newEstimate.totalXvat" disabled>
				</div>
				<div class="rebate">
					<label for="rebate">Ristourne</label>
					<input name="Ristourne" id="rebate" placeholder="">
					<select name="percent" id="rebate">
				<option value="option 1">%</option>
				<option value="option 2">%</option>
				<option value="option 3">%</option>
			</select>
				</div>
				<div class="subtotal">
					<label for="sous-total">Sous-total hors taxes</label>
					<input name="Sous-Total hors taxes" id="sous-total" ng-model="newEstimate.underTotalXvat" ng-value="newEstimate.underTotalXvat" disabled>

				</div>
				<div class="tva">
					<label for="tva-21">TVA 21%</label>
					<input name="TVA 21%" id="tva-21" ng-model="newEstimate.tva" ng-value="newEstimate.tva" disabled>
				</div>

				<div class="ttc">

					<label for="total-ttc">Total TTC</label>
					<input name="Total TTC" id="total-ttc" ng-model="newEstimate.totalTtc" ng-value="newEstimate.totalTtc" disabled>
				</div>
				<div class="deposit">
					<label for="deposit">Accompte</label>
					<input name="Acompte" id="deposit" ng-model="newEstimate.deposit" ng-value="newEstimate.deposit" ng-change="calcAmount()">
				</div>


				<div class="sum">
					<label for="sum">A payer</label>
					<input name="A payer" id="sum" ng-model="newEstimate.sum" ng-value="newEstimate.sum" disabled>
				</div>

				<button type="" class="next">Suivant</button>
		</fieldset>

		<input type="submit" value="Valider"></input>
	</form>
	</div>